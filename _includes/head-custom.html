<style>
  /* Theme Variables */
  :root {
    --bg-color: #f9f4e6;
    /* Lighter Sepia (Pearl/Cream) */
    --text-color: #333;
    --link-color: #10b981;
    /* Updated Banner to match link color flatly */
    --header-bg: #10b981;
    --header-border: #047857;
  }

  /* Hide DEFAULT Theme Sidebar/Header (Bio, Name, Github Link) */
  header,
  #header-wrapper {
    display: none !important;
  }

  [data-theme="dark"] {
    --bg-color: #1e1e1e;
    --text-color: #f4ecd8;
    --link-color: #10b981;
    --header-bg: linear-gradient(to right, #064e3b, #065f46);
    --header-border: #022c22;
  }

  body {
    background-color: var(--bg-color) !important;
    color: var(--text-color) !important;
    transition: background-color 0.3s, color 0.3s;
  }

  /* Force headers and links to use variables */
  h1,
  h2,
  h3,
  h4,
  h5,
  h5,
  h6,
  strong,
  b {
    color: var(--text-color) !important;
  }

  a {
    color: var(--link-color) !important;
  }

  /* Minimal Theme Switch */
  .theme-switch-wrapper {
    position: fixed;
    bottom: 20px;
    right: 25px;
    z-index: 1000;
    display: flex;
    align-items: center;
    opacity: 0.8;
    transition: opacity 0.3s;
  }

  .theme-switch-wrapper:hover {
    opacity: 1;
  }

  .theme-switch {
    display: inline-block;
    height: 24px;
    position: relative;
    width: 44px;
  }

  .theme-switch input {
    display: none;
  }

  .slider {
    background-color: #ccc;
    bottom: 0;
    cursor: pointer;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    transition: .4s;
    border-radius: 24px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .slider:before {
    background-color: #fff;
    bottom: 3px;
    content: "";
    height: 18px;
    left: 3px;
    position: absolute;
    transition: .4s;
    width: 18px;
    border-radius: 50%;
  }

  input:checked+.slider {
    background-color: #10b981;
  }

  input:checked+.slider:before {
    transform: translateX(20px);
  }

  /* Contact Link - injected via JS but styled here */
  #custom-contact-link {
    font-size: 0.85rem;
    padding-top: 10px;
    opacity: 0.8;
    margin-top: 15px;
    display: block;
  }

  #custom-contact-link a {
    text-decoration: none;
    border-bottom: 1px dotted currentColor;
    color: var(--link-color) !important;
  }

  #custom-contact-link a:hover {
    opacity: 1;
    border-bottom: 1px solid currentColor;
  }

  /* Latest Activity Feed */
  .activity-feed {
    margin-top: 1.5rem;
    border-left: 2px solid rgba(16, 185, 129, 0.2);
    /* Emerald tint */
    padding-left: 1.5rem;
    margin-left: 0.5rem;
  }

  .activity-item {
    position: relative;
    margin-bottom: 2rem;
  }

  .activity-item::before {
    content: "";
    position: absolute;
    left: -1.9rem;
    /* Align with border line */
    top: 5px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background-color: var(--link-color);
    border: 2px solid var(--bg-color);
  }

  .activity-meta {
    font-size: 0.85rem;
    color: var(--text-color);
    opacity: 0.7;
    margin-bottom: 0.25rem;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .activity-type {
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.7rem;
    padding: 2px 6px;
    border-radius: 4px;
    background-color: rgba(0, 0, 0, 0.05);
  }

  [data-theme="dark"] .activity-type {
    background-color: rgba(255, 255, 255, 0.1);
  }

  .activity-title {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
  }

  .activity-title a {
    text-decoration: none;
  }

  /* Sidebar Navigation */
  #sidebar {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    width: 250px;
    background-color: var(--bg-color);
    border-right: 1px solid rgba(0, 0, 0, 0.1);
    padding: 2rem 1.5rem;
    display: flex;
    flex-direction: column;
    z-index: 1000;
  }

  [data-theme="dark"] #sidebar {
    border-right: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Push main content */
  .wrapper {
    margin-left: 250px !important;
    width: auto !important;
    max-width: 800px;
    /* Constrain reading width */
  }

  /* Mobile Responsive: Sidebar on top or hidden behind menu? 
     For simplicity, on mobile we'll stack it at the top 
  */
  @media (max-width: 768px) {
    #sidebar {
      position: relative;
      width: 100%;
      height: auto;
      border-right: none;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .wrapper {
      margin-left: 0 !important;
      padding: 1rem;
    }
  }

  .sidebar-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 2rem;
    color: var(--text-color);
  }

  .nav-link {
    display: block;
    padding: 0.5rem 0;
    color: var(--text-color) !important;
    text-decoration: none;
    font-size: 1rem;
    opacity: 0.8;
    transition: opacity 0.2s;
  }

  .nav-link:hover {
    opacity: 1;
    color: var(--link-color) !important;
  }

  .nav-section {
    margin-bottom: 2rem;
  }

  .nav-section-title {
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    color: var(--text-color);
    opacity: 0.5;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Inject Sidebar
    if (!document.getElementById('sidebar')) {
      const sidebar = document.createElement('nav');
      sidebar.id = 'sidebar';
      sidebar.innerHTML = `
        <div class="sidebar-title">Kyle Beck</div>
        
        <div class="nav-section">
          <div class="nav-section-title">Navigation</div>
          <a href="/" class="nav-link">Home</a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Projects</div>
          <a href="/plus3-doremidi-guide/" class="nav-link">Guides</a>
          <a href="/tonverk-presets/" class="nav-link">Presets</a>
        </div>

        <div class="nav-section">
           <div class="nav-section-title">Connect</div>
           <a href="mailto:kyle@kyle-beck.com" class="nav-link">Contact</a>
        </div>
      `;
      document.body.prepend(sidebar);
    }

    // Theme Toggle Logic (Existing)
    if (document.getElementById('theme-toggle-checkbox')) return;

    // ... (Attach toggle to sidebar or keep floating? Floating is fine for now, or move to sidebar)
    // Let's move the toggle into the sidebar for a cleaner look

    const sidebar = document.getElementById('sidebar');
    const toggleDiv = document.createElement('div');
    toggleDiv.style.marginTop = "auto"; // Push to bottom
    toggleDiv.innerHTML = `
      <label class="theme-switch" for="theme-toggle-checkbox">
        <input type="checkbox" id="theme-toggle-checkbox" />
        <div class="slider"></div>
      </label>
    `;
    if (sidebar) {
      sidebar.appendChild(toggleDiv);
    } else {
      // Fallback if sidebar failed
      toggleDiv.className = 'theme-switch-wrapper';
      document.body.appendChild(toggleDiv);
    }

    const toggleCheckbox = document.getElementById('theme-toggle-checkbox');
    const root = document.documentElement;
    const savedTheme = localStorage.getItem('theme');

    if (savedTheme === 'dark') {
      root.setAttribute('data-theme', 'dark');
      toggleCheckbox.checked = true;
    } else if (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      // system default
    }

    toggleCheckbox.addEventListener('change', function (e) {
      if (e.target.checked) {
        root.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
      } else {
        root.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
      }
    });

  });
</script>